import{r as c,e as k,j as e,c as d,H,I as i,M as G,k as q,B as L,g as K,l as Z,m as U,n as J,u as O,o as X,p as D,q as ee,t as se,s as te,C as ce,v as ae,w as ne,x as re,y as ie,z as Y,A as oe,h as le,D as me,W as de}from"./index-DU-EKnGS.js";import{L as ue,E as _e}from"./ErrorBlock-BUdkLzf6.js";import{P as Ce,a as he,c as Te}from"./createNormalizedData-Cfh5aRnx.js";import{C as Ie,a as xe}from"./CheckboxField-DUJjFyXR.js";import"./InputField-Dx5_wTQe.js";const Ae="/sundays-store/assets/empty-cart-B3eudiac.svg",V="empty-cart",pe=`${V}__img-wrap`,Re=`${V}__img`,Ne=()=>{const{t:r}=k();return e.jsxs("section",{className:d(U,V),children:[e.jsx("h1",{className:H,children:r(i.YourCartIsEmpty)}),e.jsx("div",{className:pe,children:e.jsx("img",{src:Ae,alt:"",className:d(G,Re)})}),e.jsx("p",{className:q,children:r(i.looksLikeEmptyCart)}),e.jsx(L,{el:"link",theme:"primary",view:"primary",to:K(Z),rel:"path",children:r(i.ContinueShopping)})]})},Ee=c.memo(Ne),j="cart-item",je=`${j}__img-wrap`,ye=`${j}__title-wrap`,fe=`${j}__title`,ge=`${j}__actions`,Me=`${j}__body`,ve=`${j}__footer`,Se=`${j}__price`,Pe=r=>{const{className:u,item:s,isSelected:t,isDisabled:h,onItemSelect:l,onItemRemove:I,...y}=r,o=d(j,u),p=d(J,fe),M=O(X),{name:_,variant:a,productId:C,quantity:R,totalPrice:m}=s,{priceData:N,id:f,images:E}=a,v=_[M],{originalAmount:g,amountDifference:S,currencyChar:n,isDiscounted:x,fractionDigits:T}=N,P=c.useMemo(()=>({currentPrice:D(ee(m),T),priceDifference:D(S*R,T),originalPrice:D(g*R,T)}),[S,T,g,R,m]);return e.jsxs("li",{className:o,...y,children:[e.jsxs("div",{className:Me,children:[e.jsx(Ie,{view:"primary",theme:"secondary",controlProps:{value:s.id,onChange:l,checked:t,disabled:h}}),e.jsx("div",{className:je,children:e.jsx("img",{src:E==null?void 0:E[0].url,alt:v,className:G})}),e.jsxs("div",{className:ye,children:[e.jsx("h4",{className:p,children:v}),e.jsx("div",{className:ge,children:e.jsx(L,{disabled:h,value:s.id,size:"sm",type:"button",el:"button",theme:"secondary",view:"icon",icon:e.jsx(se,{}),onClick:I})})]})]}),e.jsxs("div",{className:ve,children:[e.jsx(Ce,{productId:C,variantId:f}),e.jsx(he,{className:Se,originalPrice:P.originalPrice,currentPrice:P.currentPrice,priceDifference:P.priceDifference,currencyChar:n,isDiscounted:x})]})]})},De=c.memo(Pe),$="cart-products",$e=`${$}__header`,be=`${$}__list`,Ue=`${$}__item`,ke=`${$}__select-all`,z=0,F=(r,u,s)=>{const t=r[u];if(t)return{productId:t.productId,variantId:t.variant.id,nextQuantity:s}},Le=r=>{const{className:u,items:s,isDisabled:t,...h}=r,l=d($,u),I=d(U,be),y=d(U,$e),[o,p]=c.useState([]),M=c.useId(),_=c.useMemo(()=>Te(s,"id"),[s]),a=O(te),C=ce[a],{t:R}=k(),[m]=ae(),N=c.useMemo(()=>s.every(n=>o.includes(n.id)),[s,o]),f=c.useCallback(()=>{p(()=>N?[]:_.ids)},[N,_.ids]),E=c.useCallback(n=>{if(t)return;const x=F(_.entities,n.currentTarget.value,z);x&&m({cartDraft:{currency:C,country:a},changedQuantityItems:[x]})},[m,a,C,t,_.entities]),v=c.useCallback(()=>{if(t)return;const n=[];o.forEach(x=>{const T=F(_.entities,x,z);T&&n.push(T),n.length&&m({cartDraft:{currency:C,country:a},changedQuantityItems:n})})},[m,a,C,t,_.entities,o]),g=c.useCallback(n=>{p(x=>{const T=n.target.value,P=x.indexOf(T),w=[...x];return P===-1?w.push(T):w.splice(P,1),w})},[]),S=c.useMemo(()=>s.map(n=>e.jsx(De,{className:Ue,item:n,isSelected:o.includes(n.id),onItemSelect:g,onItemRemove:E,isDisabled:t},n.id)),[g,E,t,s,o]);return e.jsxs("div",{className:l,...h,children:[e.jsxs("div",{className:y,children:[e.jsx(xe,{className:ke,labelContent:R(i.SelectAll),checkboxProps:{view:"primary",theme:"secondary",controlProps:{checked:N,onChange:f,id:M}}}),e.jsx(L,{disabled:t,size:"sm",theme:"primary",view:"primary",el:"button",onClick:v,children:R(i.DeleteSelected)})]}),e.jsx("ul",{className:I,children:S})]})},Oe=c.memo(Le),A="cart-sum",we=`${A}__list`,Be=`${A}__header`,Qe=`${A}__title`,Ve=`${A}__quantity`,B=`${A}__item`,Q=`${A}__item-name`,b=`${A}__item-value`,We=`${b}_difference`,Ye=`${b}_current`,ze=`${A}__order-btn`,Fe=d(ne,Qe),He=d(b,We),Ge=d(q,b,Ye),qe=r=>{const{className:u,cart:s,isDisabled:t,...h}=r,l=d(U,A,u),{totalPrice:I,lineItems:y,totalLineItemQuantity:o}=s,{currencyCode:p}=I,[M]=re(),_=ie[p],{t:a}=k(),C=c.useMemo(()=>{const{fractionDigits:m,centAmount:N}=I;let f=0;return y.forEach(E=>{const{variant:v,quantity:g}=E,{priceData:S}=v,{originalAmount:n}=S;f+=n*g}),{current:D(N,m),original:D(f,m),difference:D(N-f,m)}},[y,I]),R=c.useCallback(()=>{M().then(({error:m})=>{m?Y.error(a(i.SomethingWentWrong)):Y.success(a(i.CompletedSuccessfully))})},[M,a]);return e.jsxs("div",{className:l,...h,children:[e.jsxs("div",{className:Be,children:[e.jsx("h2",{className:Fe,children:a(i.YourCart)}),e.jsxs("span",{className:Ve,children:[o," ",o>1?a(i.items):a(i.item)]})]}),e.jsxs("ul",{className:we,children:[e.jsxs("li",{className:B,children:[e.jsx("span",{className:Q,children:a(i.OriginalPrice)}),e.jsxs("span",{className:b,children:[C.original," ",_]})]}),C.difference<0&&e.jsxs("li",{className:B,children:[e.jsx("span",{className:Q,children:a(i.Discount)}),e.jsxs("span",{className:He,children:[C.difference," ",_]})]}),e.jsxs("li",{className:B,children:[e.jsx("span",{className:Q,children:a(i.Total)}),e.jsxs("span",{className:Ge,children:[C.current," ",_]})]})]}),e.jsx(L,{className:ze,theme:"primary",view:"primary",el:"button",type:"submit",disabled:t,onClick:R,text:a(i.CreateOrder)})]})},Ke=c.memo(qe),W="cart",Ze=`${W}__title`,Je=`${W}__grid`,Xe=r=>{const{className:u,cart:s,isLoading:t,...h}=r,l=d(W,u),I=d(H,Ze),o=O(oe)||t,{t:p}=k();return e.jsxs("section",{className:l,...h,children:[e.jsx("h1",{className:I,children:p(i.Cart)}),e.jsxs("div",{className:Je,children:[e.jsx(Oe,{items:s.lineItems,isDisabled:o}),e.jsx(Ke,{cart:s,isDisabled:o})]})]})},es=c.memo(Xe),ss="view-cart",ts=()=>{const r=O(le),[u,{data:s,isFetching:t,error:h}]=me();let l;return!s&&t?l=e.jsx(ue,{}):h?l=e.jsx(_e,{isBlock:!0}):s===null||(s==null?void 0:s.lineItems.length)===0?l=e.jsx(Ee,{}):s&&(l=e.jsx(es,{cart:s,isLoading:t})),c.useEffect(()=>{u()},[u,r]),e.jsx("main",{className:ss,children:e.jsx("div",{className:de,children:l})})},os=c.memo(ts);export{ss as VIEW_CART,os as default};
