import{r as n,c as L,u as p,s as M,a as V,b as Y,d as $,j as s,e as b,F as k,I as u,L as D,g as F,V as B,f as G,h as Q,i as q,T as v,N as z,P as J}from"./index-DU-EKnGS.js";import{c as X,K as Z,a as ss,b as es,d as ts,e as as,f as ns,g as os,h as is,F as rs,i as cs,j as ls}from"./FormProfile-CZfmUaEn.js";import"./InputField-Dx5_wTQe.js";import"./CheckboxField-DUJjFyXR.js";const ds="form-registration",ms=d=>{const{className:m,onSuccess:t,...r}=d,c=L(ds,m),[l,A]=n.useState(""),a=p(M),I=n.useMemo(()=>X(a,1),[a]),[o]=V(),[S]=Y(),K=p($),H=n.useCallback(async e=>{const w=e[Z],y=e[ss],E=e[es],N=e[ts],C=e[as],h=e[ns].map(i=>({...i,firstName:E,lastName:N})),g=e[os],f=e[is];let x,T;if(g||f)for(let i=0;i<h.length;i++){const{key:W}=h[i];W===g?x=i:W===f&&(T=i)}const P={firstName:E,lastName:N,email:w,password:y,dateOfBirth:C,addresses:h,defaultShippingAddress:x,defaultBillingAddress:T},{error:j}=await S(P);if(j){A(j.data);return}t==null||t(),o(e)},[t,S,o]);return s.jsx(rs,{...r,className:c,formInitialValues:I,mode:cs.signUp,isSubmitting:K,error:l,onFormSubmit:H,setError:A})},us=n.memo(ms),_="auth-window",_s=`${_}__icon`,As=`${_}__message`,R=`${_}__question`,U=`${_}__link`,Is=d=>{const{className:m,type:t,...r}=d,c=L(_,m),[l,A]=n.useState(!1),{t:a}=b(),I=n.useCallback(()=>A(!0),[]);let o;return l===!0?o=s.jsxs("p",{className:As,children:[s.jsx("span",{className:_s,children:s.jsx(k,{})}),`${a(u.CompletedSuccessfully)}!`]}):t==="login"?o=s.jsxs(s.Fragment,{children:[s.jsx(ls,{onSuccess:I}),s.jsxs("p",{className:R,children:[a(u.QDontHaveAnAccountYet)," ",s.jsx(D,{relative:"path",className:U,to:F(B),children:a(u.Register)})]})]}):o=s.jsxs(s.Fragment,{children:[s.jsx(us,{onSuccess:I}),s.jsxs("p",{className:R,children:[a(u.QAlreadyHaveAnAccount)," ",s.jsx(D,{relative:"path",className:U,to:F(G),children:a(u.LogIn)})]})]}),s.jsx("div",{className:c,...r,children:o})},hs=n.memo(Is),O="view-auth",ps=`${O}__window`,Ss=({type:d})=>{var r,c;const m=p(Q),t=q();if(m===v.user){const l=(c=(r=t.state)==null?void 0:r.from)==null?void 0:c.pathname;return s.jsx(z,{to:l||J,relative:"path",replace:!0})}return s.jsx("main",{className:O,children:s.jsx(hs,{className:ps,type:d})})},xs=n.memo(Ss);export{O as VIEW_AUTH,ps as VIEW_AUTH_WINDOW,xs as default};
